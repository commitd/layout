import { Meta, Story, Preview, Props } from '@storybook/addon-docs/blocks'
import { Monospace } from '@committed/components'
import { useLayout } from '../src'
import { Example } from './Example'

<Meta title="Hooks|useLayout" />

# `useLayout`

If you need to adjust any of your own layout according to the properties of the current committed layout you can use the
`useLayout()` react hook to obtain all the details of the current (size dependent) layout.

This is particularly useful for children of layout components.

The returned object is of the form:

```ts
export interface Layout {
  /**
   * Is the navigation panel currently open
   */
  open: boolean
  /**
   * Is the navigation currently collapsed
   */
  collapsed: boolean
  /**
   * In which breakpoint range is the screen currently
   */
  screen: Breakpoint
  /**
   * Function to control the collapsed state.
   * Set explicitly using a boolean or pass an object to toggle
   * (this allow convenient use as a mouse event handler)
   */
  setCollapsed: (val: boolean | object) => any
  /**
   * Function to control the open state.
   * Set explicitly using a boolean or pass an object to toggle
   * (this allow convenient use as a mouse event handler)
   */
  setOpen: (val: boolean | object) => any

  // The below is the LayoutConfig for the current screen size

  /**
   * clipped, moves the header over the top of the navigation drawer
   * unclipped makes navigation full height
   * @default false
   */
  clipped: boolean
  /**
   * Can the navigation be collapsed to a smaller form
   * @default true
   */
  collapsible: boolean
  /**
   * Width of the collapsed navigation
   * @default 64
   */
  collapsedWidth: number

  /**
   * Should the Footer adjust the size to fit when nav expanded,
   * set false to keep the same width and overflow the screen.
   * @default true
   */
  footerShrink: boolean
  /**
   * Which side of the screen to show the navigation panel
   * @default left
   */
  navAnchor: Orientation
  /**
   * Navigation variant:
   * - permanent: stays all the time
   * - persistent: remains open but can be hidden with button
   * - temporary: hides on click away (and selection)
   * @default permanent
   */
  navVariant: Variant
  /**
   * Width of the navigation drawer
   * @default 256
   */
  navWidth: number
  /**
   * Position applied to the AppBar header
   * one of 'static', 'relative', 'sticky', 'fixed', 'absolute'
   * See https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Positioning
   * @default relative
   */
  headerPosition: Position
  /**
   * Both header and content adjust the size to fit when nav expanded,
   * set false to keep the same width and overflow the screen.
   * @default true
   */
  squeezed: boolean
}
```

<Preview>
  <Story name="default">
    <Example
      config={{}}
      content={React.createElement(() => {
        const layout = useLayout()
        return <Monospace>{JSON.stringify(layout, null, 2)}</Monospace>
      })}
    />
  </Story>
</Preview>
